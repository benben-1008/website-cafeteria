<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å­¦æ ¡é£Ÿå ‚ - ç®¡ç†ã‚µã‚¤ãƒˆ</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”¨ã®ç°¡å˜ãªãƒ‡ã‚¶ã‚¤ãƒ³ */
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
      margin-top: 10px;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
    }
    .calendar div {
      padding: 5px;
    }
    .holiday {
      background-color: #ffcccc;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ”§ å­¦æ ¡é£Ÿå ‚ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
      <p>ç®¡ç†ç”¨ã‚µã‚¤ãƒˆ</p>
    </header>

    <main>

      <!-- ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç† -->
      <section class="admin-section">
        <h2>ğŸ± ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†</h2>
        <div class="admin-card">
          <h3>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¿½åŠ </h3>
          <div class="form-group">
            <label for="menu-name">ãƒ¡ãƒ‹ãƒ¥ãƒ¼å:</label>
            <input type="text" id="menu-name" placeholder="ä¾‹: ã‚«ãƒ¬ãƒ¼" required>
          </div>
          <div class="form-group">
            <label for="menu-stock">æä¾›å¯èƒ½æ•°:</label>
            <input type="number" id="menu-stock" placeholder="ä¾‹: 30" required>
          </div>
          <button onclick="addMenu()" class="btn btn-primary">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¿½åŠ </button>
        </div>

        <div class="admin-card">
          <h3>ç¾åœ¨ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§</h3>
          <div id="menu-list"></div>
        </div>
      </section>

      <!-- ğŸ”¹ ä¼‘æ¥­æ—¥è¨­å®š -->
      <section class="admin-section">
        <h2>ğŸ“… ä¼‘æ¥­æ—¥è¨­å®š</h2>
        <div class="admin-card">
          <h3>ä¼‘æ¥­æ—¥ã‚’è¿½åŠ </h3>
          <div class="form-group">
            <label for="holiday-date">æ—¥ä»˜:</label>
            <input type="date" id="holiday-date" required>
          </div>
          <div class="form-group">
            <label for="holiday-reason">ç†ç”±:</label>
            <input type="text" id="holiday-reason" placeholder="ä¾‹: è¨­å‚™ç‚¹æ¤œ" required>
          </div>
          <button onclick="addHoliday()" class="btn btn-primary">ä¼‘æ¥­æ—¥ã‚’è¿½åŠ </button>
        </div>
  
        <div class="admin-card">
          <h3>ğŸ—“ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º</h3>
          <div id="calendar" class="calendar"></div>
        </div>

        <div class="admin-card">
          <h3>ç¾åœ¨ã®ä¼‘æ¥­æ—¥ä¸€è¦§</h3>
          <div id="holidays-list" class="holidays-list"></div>
        </div>
      </section>

      <!-- ğŸ”¹ äºˆç´„ä¸€è¦§ -->
      <section class="admin-section">
        <h2>ğŸ“ äºˆç´„ä¸€è¦§</h2>
        <div class="admin-card">
          <h3>äºˆç´„çŠ¶æ³</h3>
          <div id="reservations-list"></div>
        </div>
      </section>

      <section class="admin-section">
        <h2>ğŸ”— URLãƒªãƒ³ã‚¯</h2>
        <div id="page-links" class="admin-card"></div>
      </section>

    </main>

    <footer>
      <p>&copy; 2025 å­¦æ ¡é£Ÿå ‚ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
    </footer>
  </div>

  <script>
    // === ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç† ===
    function loadMenus() {
      const menus = JSON.parse(localStorage.getItem("menuItems") || "[]");
      const list = document.getElementById("menu-list");
      list.innerHTML = "";

      if (menus.length === 0) {
        list.innerHTML = "<p>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>";
        return;
      }

      menus.forEach((m, i) => {
        const div = document.createElement("div");
        div.className = "menu-item";
        div.innerHTML = `
          <p>ğŸ± ${m.name}ã€€æ®‹ã‚Š: ${m.stock}é£Ÿ</p>
          <button onclick="deleteMenu(${i})" class="btn btn-danger">å‰Šé™¤</button>
        `;
        list.appendChild(div);
      });
    }

    function addMenu() {
      const name = document.getElementById("menu-name").value.trim();
      const stock = parseInt(document.getElementById("menu-stock").value);
      if (!name || stock <= 0) return alert("ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã¨æä¾›æ•°ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");

      const menus = JSON.parse(localStorage.getItem("menuItems") || "[]");
      menus.push({ name, stock });
      localStorage.setItem("menuItems", JSON.stringify(menus));

      document.getElementById("menu-name").value = "";
      document.getElementById("menu-stock").value = "";
      loadMenus();
    }

    function deleteMenu(index) {
      const menus = JSON.parse(localStorage.getItem("menuItems") || "[]");
      menus.splice(index, 1);
      localStorage.setItem("menuItems", JSON.stringify(menus));
      loadMenus();
    }

    // === ä¼‘æ¥­æ—¥ç®¡ç† ===
    function addHoliday() {
      const date = document.getElementById("holiday-date").value;
      const reason = document.getElementById("holiday-reason").value.trim();
      if (!date || !reason) return alert("æ—¥ä»˜ã¨ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");

      const holidays = JSON.parse(localStorage.getItem("holidays") || "[]");
      holidays.push({ date, reason });
      localStorage.setItem("holidays", JSON.stringify(holidays));

      document.getElementById("holiday-date").value = "";
      document.getElementById("holiday-reason").value = "";
      loadHolidays();
      renderCalendar();
    }

    function loadHolidays() {
      const holidays = JSON.parse(localStorage.getItem("holidays") || "[]");
      const list = document.getElementById("holidays-list");
      list.innerHTML = holidays.length
        ? holidays.map(h => `<p>ğŸ“… ${h.date}ã€€ğŸ“ ${h.reason}</p>`).join("")
        : "<p>ä¼‘æ¥­æ—¥ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>";
    }

    // === ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º ===
    function renderCalendar() {
      const calendar = document.getElementById("calendar");
      const holidays = JSON.parse(localStorage.getItem("holidays") || "[]");
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth(); // 0å§‹ã¾ã‚Š

      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startWeekday = firstDay.getDay();

      calendar.innerHTML = "";

      // æ›œæ—¥
      ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"].forEach(d => {
        const div = document.createElement("div");
        div.innerHTML = `<strong>${d}</strong>`;
        calendar.appendChild(div);
      });

      // ç©ºæ¬„
      for (let i = 0; i < startWeekday; i++) {
        const blank = document.createElement("div");
        calendar.appendChild(blank);
      }

      // æ—¥ä»˜
      for (let day = 1; day <= lastDay.getDate(); day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2,"0")}-${String(day).padStart(2,"0")}`;
        const div = document.createElement("div");
        const isHoliday = holidays.some(h => h.date === dateStr);
        div.textContent = day;
        if (isHoliday) div.classList.add("holiday");
        calendar.appendChild(div);
      }
    }

    // === äºˆç´„ä¸€è¦§ ===
    function loadReservations() {
      const reservations = JSON.parse(localStorage.getItem("reservations") || "[]");
      const list = document.getElementById("reservations-list");
      list.innerHTML = reservations.length
        ? reservations.map(r => `<p>ğŸ‘¤ ${r.name} ğŸ½ï¸ ${r.food}</p>`).join("")
        : "<p>äºˆç´„ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
    }

    // === èµ·å‹•æ™‚ ===
    function renderLinks() {
      const base = window.location.href.replace(/[^/]*$/, '');
      const pages = [
        { name: 'ç”Ÿå¾’ç”¨ã‚µã‚¤ãƒˆ (index.html)', file: 'index.html' },
        { name: 'ç®¡ç†è€…ã‚µã‚¤ãƒˆ (admin.html)', file: 'admin.html' },
        { name: 'äºˆç´„ã‚µã‚¤ãƒˆ (reservation.html)', file: 'reservation.html' },
        { name: 'é£Ÿå ‚å°‚ç”¨ChatGPT (chatgpt.html)', file: 'chatgpt.html' }
      ];
      const linksDiv = document.getElementById('page-links');
      linksDiv.innerHTML = pages.map(p => {
        const url = base + p.file;
        return `<p><strong>${p.name}:</strong> <a href="${url}">${url}</a></p>`;
      }).join('');
    }

    window.onload = function() {
      loadMenus();
      loadHolidays();
      loadReservations();
      renderCalendar();
      renderLinks();
    };
  </script>
</body>
</html>
